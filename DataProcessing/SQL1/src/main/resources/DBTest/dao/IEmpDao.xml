<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="DBTest.dao.IEmpDao">
    <sql id="def">
        select * from empTest
    </sql>
    <!--    type 属性：指定实体类的全限定类名
            id 属性：给定一个唯一标识，是给查询 select 标签引用用的。
            id 标签：用于指定主键字段
            result 标签：用于指定非主键字段
            column 属性：用于指定数据库列名
            property 属性：用于指定实体类属性名称-->
    <resultMap id="empMap" type="DBTest.domain.Emp2">
        <id column="empno" property="empnos"/>
        <result column="ename" property="enames"/>
        <result column="job" property="jobs"/>
        <result column="mgr" property="mgrs"/>
        <result column="hiredate" property="hiredates"/>
        <result column="sal" property="sals"/>
        <result column="comm" property="comms"/>
        <result column="deptno" property="deptnos"/>
    </resultMap>

    <select id="findMgr" resultType="int" parameterType="String">
        select mgr from empTest where ename=#{name}
    </select>
    <insert id="Save" parameterType="DBTest.domain.Emp" >
        insert into empTest values(#{empTest.empnos},#{empTest.ename},#{empTest.job},#{empTest.mgr},null,#{empTest.sal},#{empTest.comm},#{empTest.deptno})
    </insert>
    <select id="findEmp2" resultMap="empMap">
        select * from empTest
    </select>
<!--    动态SQL语句-->
    <select id="findEmps" resultType="DBTest.domain.Emp" parameterType="Emp">
        select * from empTest
        <if test=" ename=='刘一' ">
             and ename!='刘一'
        </if>
        <if test=" ename!='刘一' ">
             and ename='刘一'
        </if>
    </select>
    <select id="findEmps2" resultType="Emp" parameterType="Emp">
        <include refid="def"/>
        <where>
            <if test=" ename=='刘一' ">
                and ename!='刘一'
            </if>
            <if test=" ename!='刘一' ">
                and ename='刘一'
            </if>
        </where>

    </select>

</mapper>